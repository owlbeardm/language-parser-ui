"use strict";(self.webpackChunklanguage_parser_ui=self.webpackChunklanguage_parser_ui||[]).push([[342],{9594:(E,m,l)=>{l.d(m,{K:()=>u});var g=l(3953),T=l(6814);const f=["row"],F=["app-vertical-dash",""];let u=(()=>{class d{cdRef;router;row;brow="";symbol;deleted=!1;constructor(c,p){this.cdRef=c,this.router=p}ngAfterContentInit(){this.resizeDash()}ngAfterContentChecked(){}ngOnInit(){}onResize(){}resizeDash(){const c=Math.max(0,Math.floor(this.row?.nativeElement.parentNode.offsetHeight/16)),p=this.brow;this.brow=c?"|\n".repeat(c):"",p!==this.brow&&this.cdRef.detectChanges()}static \u0275fac=function(p){return new(p||d)(g.rXU(g.gRc),g.rXU(T.Ix))};static \u0275cmp=g.VBU({type:d,selectors:[["th","app-vertical-dash",""]],viewQuery:function(p,_){if(1&p&&g.GBs(f,5),2&p){let h;g.mGM(h=g.lsd())&&(_.row=h.first)}},hostBindings:function(p,_){1&p&&g.bIt("resize",function(n){return _.onResize(n)},!1,g.tSv)},inputs:{symbol:"symbol"},standalone:!0,features:[g.aNF],attrs:F,decls:3,vars:1,consts:[["row",""],[1,"border","td-span"]],template:function(p,_){1&p&&(g.j41(0,"div",1,0),g.EFF(2),g.k0s()),2&p&&(g.R7$(2),g.JRh(_.brow))},styles:[".td-span[_ngcontent-%COMP%]{width:100%;height:100%;min-height:10px}"]})}return d})()},3342:(E,m,l)=>{l.r(m),l.d(m,{TranslationsComponent:()=>W});var g=l(7868),T=l(856),f=l(8608),F=l(6814),u=l(177),d=l(4341),w=l(764),c=l(1311),p=l(5380),_=l(4378),h=l(9594),n=l(3953),b=l(9407),R=l(136),C=l(3594);const k=["app-translation-line",""],j=o=>["/words/word",o];function L(o,i){if(1&o){const t=n.RV6();n.j41(0,"a",11),n.bIt("click",function(){n.eBV(t);const a=n.XpG();return n.Njj(a.startAddTranslation())}),n.EFF(1,"[Edit]"),n.k0s()}}function I(o,i){if(1&o){const t=n.RV6();n.j41(0,"a",11),n.bIt("click",function(){n.eBV(t);const a=n.XpG();return n.Njj(a.cancelTranslation())}),n.EFF(1,"[Cancel]"),n.k0s()}}function x(o,i){if(1&o){const t=n.RV6();n.j41(0,"span"),n.EFF(1,"["),n.j41(2,"a",16),n.bIt("click",function(){n.eBV(t);const a=n.XpG().$implicit,r=n.XpG(3);return n.Njj(r.deleteTranslation(a))}),n.EFF(3,"x"),n.k0s(),n.EFF(4,"]"),n.k0s()}}function G(o,i){if(1&o&&(n.j41(0,"span"),n.EFF(1),n.nrm(2,"app-translation-word",15),n.DNE(3,x,5,0,"span",10),n.k0s()),2&o){const t=i.$implicit,e=i.index,a=n.XpG(3);n.R7$(),n.SpI("",0==e?"":"; "," "),n.R7$(),n.Y8G("translation",t),n.R7$(),n.Y8G("ngIf",a.editMode)}}function y(o,i){if(1&o&&(n.j41(0,"tr")(1,"th",0),n.EFF(2,"|"),n.k0s(),n.j41(3,"th",12)(4,"span",3),n.EFF(5),n.k0s()(),n.j41(6,"th",13)(7,"span",3),n.EFF(8),n.nI1(9,"translationType"),n.k0s()(),n.j41(10,"th",14),n.DNE(11,G,4,3,"span",9),n.k0s(),n.nrm(12,"th",0),n.j41(13,"th",0),n.EFF(14,"|"),n.k0s()()),2&o){const t=i.$implicit,e=n.XpG().$implicit,a=n.XpG();n.R7$(3),n.Y8G("rowSpan",a.getLanguageRowspans(e)),n.R7$(2),n.JRh(e),n.R7$(3),n.JRh(n.bMT(9,4,t)),n.R7$(3),n.Y8G("ngForOf",a.getTranslationForWordAndType(t,!0,e))}}function S(o,i){if(1&o){const t=n.RV6();n.j41(0,"span"),n.EFF(1,"["),n.j41(2,"a",16),n.bIt("click",function(){n.eBV(t);const a=n.XpG().$implicit,r=n.XpG(3);return n.Njj(r.deleteTranslation(a))}),n.EFF(3,"x"),n.k0s(),n.EFF(4,"]"),n.k0s()}}function M(o,i){if(1&o&&(n.j41(0,"span"),n.EFF(1),n.j41(2,"span",17),n.nrm(3,"app-translation-word",15),n.DNE(4,S,5,0,"span",10),n.k0s()()),2&o){const t=i.$implicit,e=i.index,a=n.XpG(3);n.R7$(),n.SpI("",0==e?"":"; "," "),n.R7$(2),n.Y8G("translation",t),n.R7$(),n.Y8G("ngIf",a.editMode)}}function v(o,i){if(1&o&&(n.j41(0,"tr")(1,"th",0),n.EFF(2,"|"),n.k0s(),n.j41(3,"th",13)(4,"span",3),n.EFF(5),n.nI1(6,"translationType"),n.k0s()(),n.j41(7,"th",14),n.DNE(8,M,5,3,"span",9),n.k0s(),n.nrm(9,"th",0),n.j41(10,"th",0),n.EFF(11,"|"),n.k0s()()),2&o){const t=i.$implicit,e=n.XpG().$implicit,a=n.XpG();n.R7$(5),n.JRh(n.bMT(6,2,t)),n.R7$(3),n.Y8G("ngForOf",a.getTranslationForWordAndType(t,!1,e))}}function $(o,i){if(1&o&&(n.qex(0),n.DNE(1,y,15,6,"tr",9)(2,v,12,4,"tr",9),n.bVm()),2&o){const t=i.$implicit,e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.getTranslationTypes(!0,t)),n.R7$(),n.Y8G("ngForOf",e.getTranslationTypes(!1,t))}}function D(o,i){if(1&o&&(n.j41(0,"option",30),n.EFF(1),n.k0s()),2&o){const t=i.$implicit;n.Y8G("ngValue",t),n.R7$(),n.JRh(t.name)}}function N(o,i){if(1&o){const t=n.RV6();n.j41(0,"tr"),n.nrm(1,"th",18),n.j41(2,"th",19)(3,"div",20)(4,"app-all-languages",21),n.bIt("selectedLanguageChange",function(a){n.eBV(t);const r=n.XpG();return n.Njj(r.changeLanguage(a))}),n.mxI("selectedLanguageChange",function(a){n.eBV(t);const r=n.XpG();return n.DH7(r.language,a)||(r.language=a),n.Njj(a)}),n.k0s(),n.j41(5,"input",22),n.bIt("ngModelChange",function(a){n.eBV(t);const r=n.XpG();return n.Njj(r.changedWordTranslation(a))}),n.mxI("ngModelChange",function(a){n.eBV(t);const r=n.XpG();return n.DH7(r.wordTranslation,a)||(r.wordTranslation=a),n.Njj(a)}),n.k0s(),n.j41(6,"span",23)(7,"select",24),n.bIt("ngModelChange",function(a){n.eBV(t);const r=n.XpG();return n.Njj(r.changePos(a))}),n.mxI("ngModelChange",function(a){n.eBV(t);const r=n.XpG();return n.DH7(r.pos,a)||(r.pos=a),n.Njj(a)}),n.j41(8,"option",25),n.EFF(9,"--- Part of Speech ---"),n.k0s(),n.DNE(10,D,2,2,"option",26),n.k0s()(),n.j41(11,"a",27),n.bIt("click",function(){n.eBV(t);const a=n.XpG();return n.Njj(a.addAsPhrase=!a.addAsPhrase)}),n.EFF(12,"[ Phrase ]"),n.k0s()()(),n.j41(13,"th",28)(14,"a",29),n.bIt("click",function(){n.eBV(t);const a=n.XpG();return n.Njj(a.addNewTranslation())}),n.EFF(15,"[Add New]"),n.k0s()(),n.nrm(16,"th",18),n.k0s()}if(2&o){const t=n.XpG();n.R7$(4),n.R50("selectedLanguage",t.language),n.Y8G("label","To"),n.R7$(),n.R50("ngModel",t.wordTranslation),n.R7$(2),n.R50("ngModel",t.pos),n.R7$(),n.Y8G("ngValue",void 0),n.R7$(2),n.Y8G("ngForOf",t.poses),n.R7$(),n.Y8G("ngClass",t.addAsPhrase?"text-blue-dull":"text-grey-dull")}}function V(o,i){if(1&o){const t=n.RV6();n.j41(0,"tr")(1,"th",0),n.EFF(2,"|"),n.k0s(),n.j41(3,"th")(4,"a",31),n.bIt("click",function(){const a=n.eBV(t).$implicit,r=n.XpG(2);return n.Njj(r.addTranslationWord(a))}),n.EFF(5,"[+]"),n.k0s()(),n.j41(6,"th",2)(7,"a",32),n.EFF(8),n.nI1(9,"writtenWord"),n.k0s(),n.EFF(10),n.k0s(),n.j41(11,"th",0),n.EFF(12,"|"),n.k0s()()}if(2&o){const t=i.$implicit;n.R7$(7),n.Y8G("fragment",null==t.language?null:t.language.displayName)("routerLink",n.eq3(8,j,t.word)),n.R7$(),n.JRh(n.bMT(9,6,t.writtenWord)),n.R7$(2),n.E5c(" / ",t.word," / ",null==t.partOfSpeech?null:t.partOfSpeech.abbreviation," ",null==t.language?null:t.language.displayName," ")}}function X(o,i){if(1&o&&(n.qex(0),n.DNE(1,V,13,10,"tr",9),n.bVm()),2&o){const t=n.XpG();n.R7$(),n.Y8G("ngForOf",t.wordsForTranslation.data)}}let Y=(()=>{class o{posService;wordsService;translationService;poses=[];wordsForTranslation={};word;languageToFilter;editMode=!1;language;pos;wordTranslation;addAsPhrase=!1;constructor(t,e,a){this.posService=t,this.wordsService=e,this.translationService=a}ngOnInit(){}getTranslationTypes(t,e){const a=this.word.translations?.filter(s=>t?s.wordTo&&s.wordTo.language?.displayName===e:s.phraseTo&&s.phraseTo.language?.displayName===e).map(s=>s.type).map(s=>s||T.y.General);return[...new Set(a)]||[]}getLanguageRowspans(t){return this.getTranslationTypes(!0,t).length+this.getTranslationTypes(!1,t).length}getTranslationLangs(){const t=this.word.translations?.map(a=>a.wordTo?.language?a.wordTo?.language:a.phraseTo?.language).map(a=>a?a.displayName:"Unknown");return[...new Set(t)]||[]}getTranslationForWordAndType(t,e,a){const r=this.word.translations?.filter(s=>(e?s.wordTo&&s.wordTo.language?.displayName===a:s.phraseTo&&s.phraseTo.language?.displayName===a)&&s.type===t);return r||[]}changeLanguage(t){console.log(t),this.pos=void 0,t?.id&&this.posService.getAllPosByLanguage({languageId:t?.id}).subscribe(e=>{this.poses=e.sort((a,r)=>a.name?a.name.localeCompare(r.name?r.name:""):-1),this.word.partOfSpeech?.id&&e.forEach(a=>{this.word.partOfSpeech?.id===a.id&&(this.pos=a,this.changePos(a,t))})})}changePos(t,e=this.language){console.log("changePos",t,"lang",e),e&&this.loadWordsTranslations(t,e)}startAddTranslation(){this.editMode=!0,this.languageToFilter&&(this.language=this.languageToFilter,console.log("start add translation",this.language))}loadWordsTranslations(t=this.pos,e=this.language,a=this.wordTranslation){console.log("loadWordsTranslations",t,"lang",e,"wordTranslation",a),e&&a&&this.wordsService.getAllWords({filter:{word:a,languageId:e?.id,posId:t?.id}}).subscribe(r=>{this.wordsForTranslation=r})}changedWordTranslation(t){this.loadWordsTranslations(this.pos,this.language,t)}addTranslationWord(t){this.addTranslation({type:T.y.General,wordTo:t,wordFrom:this.word})}addNewTranslation(){this.refreshEdit()}deleteTranslation(t){t.id&&this.translationService.deleteTranslation({id:t.id}).subscribe(()=>{this.word.translations=this.word.translations?.filter(e=>e.id!==t.id),this.refreshEdit()})}cancelTranslation(){this.refreshEdit()}addTranslation(t){this.translationService.addTranslation({body:t}).subscribe(()=>{this.word.id?this.translationService.getTranslationsForWord({id:this.word.id}).subscribe(e=>{this.word.translations=e,this.refreshEdit()}):this.refreshEdit()})}refreshEdit(){this.language=void 0,this.pos=void 0,this.wordTranslation=void 0,this.editMode=!1,this.wordsForTranslation={}}static \u0275fac=function(e){return new(e||o)(n.rXU(b.Q),n.rXU(R.t),n.rXU(C.L))};static \u0275cmp=n.VBU({type:o,selectors:[["tbody","app-translation-line",""]],inputs:{word:"word",languageToFilter:"languageToFilter"},standalone:!0,features:[n.aNF],attrs:k,decls:28,vars:16,consts:[[1,"border"],["app-horizontal-dash","","colspan","4",1,"border"],["colspan","3",2,"padding-left","8px","padding-right","8px","white-space","nowrap","text-align","left"],[2,"white-space","nowrap"],[1,"text-green-dull","link-btn",3,"fragment","routerLink"],[2,"text-transform","capitalize"],[1,"text-main","link-btn"],[1,"text-grey-dull"],["class","text-grey-dull",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-grey-dull",3,"click"],[1,"border",2,"padding-left","4px","padding-right","8px","text-align","left",3,"rowSpan"],[1,"border",2,"padding-left","4px","padding-right","8px","text-align","left"],[2,"padding-left","8px","padding-right","8px","white-space","nowrap","text-align","left"],[3,"translation"],[1,"text-red-dull",3,"click"],[1,"text-blue-dull","link-btn"],["app-vertical-dash","",1,"border"],["colspan","3"],[2,"text-align","left","display","flex"],[3,"selectedLanguageChange","selectedLanguage","label"],["type","text",2,"height","16px","margin-left","8px","margin-top","30px","margin-right","0px",3,"ngModelChange","ngModel"],[2,"margin-left","8px","text-align","end"],["id","posSelector",1,"posSelector",2,"margin-top","28px",3,"ngModelChange","ngModel"],["disabled","",1,"text-grey-dull",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[2,"margin-left","16px","vertical-align","text-bottom","margin-top","32px",3,"click","ngClass"],[1,"border",2,"padding-top","22px"],[1,"text-green-dull",2,"vertical-align","text-bottom",3,"click"],[3,"ngValue"],[1,"text-green-dull","link-btn",3,"click"],[1,"text-blue-dull","link-btn",3,"fragment","routerLink"]],template:function(e,a){1&e&&(n.j41(0,"tr")(1,"th",0),n.EFF(2,"+"),n.k0s(),n.nrm(3,"th",1),n.j41(4,"th",0),n.EFF(5,"+"),n.k0s()(),n.j41(6,"tr")(7,"th",0),n.EFF(8,"|"),n.k0s(),n.j41(9,"th",2)(10,"span",3)(11,"a",4)(12,"span",5),n.EFF(13),n.nI1(14,"writtenWord"),n.k0s(),n.j41(15,"span",6),n.EFF(16),n.k0s()()(),n.EFF(17),n.j41(18,"span",7),n.EFF(19),n.k0s()(),n.j41(20,"th",0),n.DNE(21,L,2,0,"a",8)(22,I,2,0,"a",8),n.k0s(),n.j41(23,"th",0),n.EFF(24,"|"),n.k0s()(),n.DNE(25,$,3,2,"ng-container",9)(26,N,17,7,"tr",10)(27,X,2,1,"ng-container",10)),2&e&&(n.R7$(11),n.Y8G("fragment",null==a.word.language?null:a.word.language.displayName)("routerLink",n.eq3(14,j,a.word.word)),n.R7$(2),n.JRh(n.bMT(14,12,a.word.writtenWord)),n.R7$(3),n.SpI(" / ",a.word.word," /"),n.R7$(),n.SpI(" ",a.word.comment," "),n.R7$(2),n.Lme(" ",null==a.word.partOfSpeech?null:a.word.partOfSpeech.abbreviation," ",null==a.word.language?null:a.word.language.displayName,""),n.R7$(2),n.Y8G("ngIf",!a.editMode),n.R7$(),n.Y8G("ngIf",a.editMode),n.R7$(3),n.Y8G("ngForOf",a.getTranslationLangs()),n.R7$(),n.Y8G("ngIf",a.editMode),n.R7$(),n.Y8G("ngIf",a.editMode))},dependencies:[w.E,c.P,p._,f.g,F.Wk,u.MD,u.YU,u.Sq,u.bT,d.YN,d.xH,d.y7,d.me,d.wz,d.BC,d.vS,_.g,h.K]})}return o})();var B=l(3050);function O(o,i){if(1&o&&(n.qex(0),n.nrm(1,"tbody",15),n.bVm()),2&o){const t=i.$implicit,e=n.XpG();n.R7$(),n.Y8G("word",t)("languageToFilter",e.languageTo)}}let W=(()=>{class o{translationService;languageService;words={};languageFrom;wordSearch;languageTo;translationSearch;pageSize=20;constructor(t,e){this.translationService=t,this.languageService=e}ngOnInit(){}load(t){this.translationService.getAllWordsWithTranslationsFromLang1({filter:t}).subscribe(e=>{e.data&&(this.words=e)})}loadDefault(t){console.log("loadDefault",t,this.languageFrom,this.languageTo,this.wordSearch,this.translationSearch),t||(t={}),this.load(t={page:t.page?t.page:void 0,size:t.size?t.size:this.pageSize,word:t.word?t.word:""===t.word?void 0:this.wordSearch,translation:t.translation?t.translation:""===t.translation?void 0:this.translationSearch,languageFromId:t.languageFromId?t.languageFromId:null===t.languageFromId?void 0:this.languageFrom?.id,languageToId:t.languageToId?t.languageToId:null===t.languageToId?void 0:this.languageTo?.id})}resetFilter(){this.languageFrom=void 0,this.languageTo=void 0,this.wordSearch=void 0,this.translationSearch=void 0,this.loadDefault({})}static \u0275fac=function(e){return new(e||o)(n.rXU(C.L),n.rXU(B.D))};static \u0275cmp=n.VBU({type:o,selectors:[["app-translations"]],standalone:!0,features:[n.aNF],decls:51,vars:11,consts:[["span","1",1,"border",2,"width","8px"],["span","1",2,"width","auto"],["span","1",2,"width","9px"],["span","1",2,"width","70px"],[1,"border"],[1,"border",2,"text-align","left","display","flex"],[3,"selectedLanguageChange","selectedLanguage","label"],["type","text",2,"height","16px","margin-left","8px","margin-top","30px","margin-right","0px",3,"ngModelChange","ngModel"],[1,"text-red-dull",3,"click"],[1,"table-content"],["span","1",2,"width","1%"],["span","1",2,"width","20px"],["span","1",2,"width","72px"],[4,"ngFor","ngForOf"],[3,"load","page","size","totalPages","total"],["app-translation-line","",3,"word","languageToFilter"]],template:function(e,a){1&e&&(n.j41(0,"table")(1,"colgroup"),n.nrm(2,"col",0)(3,"col",1)(4,"col",2)(5,"col",3)(6,"col",0),n.k0s(),n.j41(7,"tbody")(8,"tr")(9,"th",4),n.EFF(10,"|"),n.nrm(11,"br"),n.EFF(12,"|"),n.nrm(13,"br"),n.EFF(14,"|"),n.nrm(15,"br"),n.EFF(16,"|"),n.k0s(),n.j41(17,"th",5)(18,"app-all-languages",6),n.bIt("selectedLanguageChange",function(s){return a.loadDefault({languageFromId:s.id})}),n.mxI("selectedLanguageChange",function(s){return n.DH7(a.languageFrom,s)||(a.languageFrom=s),s}),n.k0s(),n.j41(19,"input",7),n.bIt("ngModelChange",function(s){return a.loadDefault({word:s})}),n.mxI("ngModelChange",function(s){return n.DH7(a.wordSearch,s)||(a.wordSearch=s),s}),n.k0s(),n.j41(20,"app-all-languages",6),n.bIt("selectedLanguageChange",function(s){return a.loadDefault({languageToId:s.id})}),n.mxI("selectedLanguageChange",function(s){return n.DH7(a.languageTo,s)||(a.languageTo=s),s}),n.k0s(),n.j41(21,"input",7),n.bIt("ngModelChange",function(s){return a.loadDefault({translation:s})}),n.mxI("ngModelChange",function(s){return n.DH7(a.translationSearch,s)||(a.translationSearch=s),s}),n.k0s()(),n.j41(22,"th",4),n.EFF(23,"|"),n.nrm(24,"br"),n.EFF(25,"|"),n.nrm(26,"br"),n.EFF(27,"|"),n.nrm(28,"br"),n.EFF(29,"|"),n.k0s(),n.j41(30,"th")(31,"a",8),n.bIt("click",function(){return a.resetFilter()}),n.EFF(32,"[ x ]"),n.k0s()(),n.j41(33,"th",4),n.EFF(34,"|"),n.nrm(35,"br"),n.EFF(36,"|"),n.nrm(37,"br"),n.EFF(38,"|"),n.nrm(39,"br"),n.EFF(40,"|"),n.k0s()()()(),n.j41(41,"table",9)(42,"colgroup"),n.nrm(43,"col",0)(44,"col",10)(45,"col",11)(46,"col",1)(47,"col",12)(48,"col",0),n.k0s(),n.DNE(49,O,2,2,"ng-container",13),n.k0s(),n.j41(50,"app-list-paginator",14),n.bIt("load",function(s){return a.loadDefault(s)}),n.k0s()),2&e&&(n.R7$(18),n.R50("selectedLanguage",a.languageFrom),n.Y8G("label","From"),n.R7$(),n.R50("ngModel",a.wordSearch),n.R7$(),n.R50("selectedLanguage",a.languageTo),n.Y8G("label","To"),n.R7$(),n.R50("ngModel",a.translationSearch),n.R7$(28),n.Y8G("ngForOf",a.words.data),n.R7$(),n.Y8G("page",a.words.page?a.words.page:0)("size",a.pageSize)("totalPages",a.words.totalPages?a.words.totalPages:0)("total",a.words.total?a.words.total:0))},dependencies:[w.E,g.n,Y,d.YN,d.me,d.BC,d.vS,u.Sq]})}return o})()}}]);